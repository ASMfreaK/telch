<html class="layout-pf layout-pf-fixed">
<head>
    <!-- jQuery -->
    <script src="/static/bower/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="/static/bower/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- PatternFly -->
    <link href="/static/bower/patternfly/dist/css/patternfly.min.css" rel="stylesheet" media="screen, print">
    <link href="/static/bower/patternfly/dist/css/patternfly-additions.min.css" rel="stylesheet" media="screen, print">
    <script src="/static/bower/patternfly/dist/js/patternfly.js"></script>
    <script src="/static/bower/patternfly/dist/js/patternfly-functions.js"></script>
    <!-- Fork me on Github ribbon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />

    <script src="/static/bower/c3/c3.min.js"></script>
    <script src="/static/bower/d3/d3.min.js"></script>
    <script src="/static/bower/matchHeight/dist/jquery.matchHeight-min.js"></script>

    {% block extra_head %}{% endblock %}
    <title>Tasks</title>
</head>

<body>
  <!-- top navigation -->
  <nav class="navbar navbar-pf-vertical">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img class="navbar-brand-icon" src="//assets/img/logo-alt.svg" alt=""/><img class="navbar-brand-name" src="//assets/img/brand-alt.svg" alt="Telch" />
      </a>
    </div>
    <nav class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right navbar-iconic">
        <li>
          <div class="text-muted">{% include 'commit.jinja2' %}</div>
        </li>
      </ul>
    </nav>
  </nav>

  <!-- left navigation sidebar -->
  <div class="nav-pf-vertical nav-pf-vertical-with-sub-menus">
    <ul class="list-group">
      <li id='filter-all' class="list-group-item">
        <a>
          <span class="fa fa-tasks" data-toggle="tooltip" title="All tasks"></span>
          <span class="list-group-item-value">All tasks</span>
        </a>
      </li>
      <li id='filter-pending' class="list-group-item">
        <a>
          <span class="fa fa-list-ul" data-toggle="tooltip" title="Pending"></span>
          <span class="list-group-item-value">Pending</span>
        </a>
      </li>
      <li class="list-group-item">
        <a id='filter-completed'>
          <span class="fa fa-check" data-toggle="tooltip" title="Completed"></span>
          <span class="list-group-item-value">Completed</span>
        </a>
      </li>
    </ul>
  </div>

  <div class="container-fluid container-cards-pf container-pf-nav-pf-vertical">
    {% block content %}{% endblock %}
  </div>

      
<script>
  function update_left_navbar(){
    console.log('update_left_navbar+');
    if ('status' in document.filter_value) {
      if (document.filter_value.status == 'pending') {
        $("#filter-all").removeClass("active");
        $("#filter-pending").addClass("active");
        $("#filter-completed").removeClass("active");
      } else if (document.filter_value.status == 'completed') {
        $("#filter-all").removeClass("active");
        $("#filter-pending").removeClass("active");
        $("#filter-completed").addClass("active");
      } else {
        // unknown status? Weird
      }
    } else {
      $("#filter-all").addClass("active");
      $("#filter-pending").removeClass("active");
      $("#filter-completed").removeClass("active");
    }

    // Hide 'Clear all filters' if none are set
    if (document.filter_value == {}) {
      $("#filter-clear").hide();
    } else {
      $("#filter-clear").show();
    }

    // Update dropdown values if set
    if ('order' in document.filter_value) {
      value = document.filter_value.order;
      $("#filter-order").attr('data-selected', value);
      $("#filter-order").children().removeClass();
      $("#filter-order").children().addClass('fa');
      $("#filter-order").children().addClass('fa-sort-alpha-'+value);
    }

    if ('sortby' in document.filter_value) {
      value = document.filter_value.sortby;
      $("#filter-sortby").attr('data-selected', value);
      list = $(".dropdown-menu[data-field='sortby']");
      list.children().removeClass("selected");
      li = $(".dropdown-menu[data-field='sortby'] > li[data-value='"+value+"'");
      li.addClass("selected");

      $("#filter-sortby").html(li.text() + ' <span class="caret"></span>');
    }

    console.log('update_left_navbar-');
  }

  (function($) {
  $(document).ready(function() {
    // Upon clicking the find button, show the find dropdown content
    $(".btn-find").click(function () {
      $(this).parent().find(".find-pf-dropdown-container").toggle();
    });
    // Upon clicking the find close button, hide the find dropdown content
    $(".btn-find-close").click(function () {
      $(".find-pf-dropdown-container").hide();
    });

    $("#filter-all").click(function(){
      delete document.filter_value['status'];
      send_filter_updates();
    });

    $("#filter-pending").click(function(){
      document.filter_value['status'] = 'pending';
      send_filter_updates();
    });

    $("#filter-completed").click(function(){
      document.filter_value['status'] = 'completed';
      send_filter_updates();
    });

    // Initialize the vertical navigation
    $().setupVerticalNavigation(true);
  });
})(jQuery);
</script>

</body>
</html>
      
